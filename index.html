<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Vishwa Belaganti - Academic Profile</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="friendship.css">
    <link rel="stylesheet" href="game-fixes.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
    
    <!-- 3D and Animation Libraries -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="particles.js"></script>
    <script src="snake-game.js"></script>
    <script src="pong-game.js"></script>
    <script src="interactive-options.js"></script>
    <script src="games.js"></script>
    <script src="chatbot.js"></script>
    <script src="friendship.js"></script>
    <script src="konami-game.js"></script>
    <script src="trivia-quiz.js"></script>
</head>
<body>
    <div id="particles-js"></div>
    
    <!-- Floating 3D Elements -->
    <div class="floating-element morphing-shape" style="top: 10%; left: 10%;"></div>
    <div class="floating-element morphing-shape" style="top: 20%; right: 15%; animation-delay: -2s;"></div>
    <div class="floating-element morphing-shape" style="bottom: 15%; left: 20%; animation-delay: -4s;"></div>
    <div class="floating-element morphing-shape" style="bottom: 25%; right: 10%; animation-delay: -6s;"></div>

    <div class="container">
        <nav class="glass-nav interactive-card">
            <a href="index.html" class="name-title holographic-text">Vishwa karan</a>
            <button class="mobile-menu-toggle" aria-label="Toggle mobile menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="projects.html">Projects</a>
                <a href="certificates.html">Certificates</a>
                <a href="files/Vishwa_Belaganti_Resume 2025.pdf" target="_blank">Resume</a>
            </div>
        </nav>

        <div class="profile-section">
            <div class="profile-sidebar interactive-card" data-aos="fade-right">
                <div class="profile-image-container">
                    <img src="images/profile.png" alt="Profile Picture" class="profile-image">
                    <div class="profile-glow"></div>
                </div>
                <h1 class="gradient-text holographic-text">Vishwa Karan</h1>
                <p class="interests">Passionate about innovation in technology</p>
                <div class="social-links">
                    <a href="#" class="social-link location interactive-icon">
                        <i class="fas fa-map-marker-alt"></i>
                        Lubbock, Texas, United States
                    </a>
                    <a href="#" class="social-link university interactive-icon">
                        <i class="fas fa-university"></i>
                        Your University
                    </a>
                    <a href="mailto:vishwa.belaganti@gmail.com" class="social-link email interactive-icon">
                        <i class="fas fa-envelope"></i>
                        Email
                    </a>
                    <a href="https://github.com/Vishwakaran12" class="social-link github interactive-icon" target="_blank">
                        <i class="fab fa-github"></i>
                        Github
                    </a>
                    <a href="https://www.linkedin.com/in/vishwa-belaganti/" class="social-link linkedin interactive-icon" target="_blank">
                        <i class="fab fa-linkedin"></i>
                        LinkedIn
                    </a>
                </div>
            </div>

            <div class="main-content" data-aos="fade-left">
                <div class="key-qualities">
                    <div class="quality-card interactive-card" data-aos="zoom-in" data-aos-delay="100">
                        <div class="quality-icon-wrapper">
                            <i class="fas fa-robot quality-icon"></i>
                            <div class="icon-pulse"></div>
                        </div>
                        <h3 class="quality-title">AI Enthusiast</h3>
                        <p class="quality-description">Passionate about artificial intelligence and its potential to transform industries</p>
                    </div>
                    <div class="quality-card interactive-card" data-aos="zoom-in" data-aos-delay="200">
                        <div class="quality-icon-wrapper">
                            <i class="fas fa-shield-alt quality-icon"></i>
                            <div class="icon-pulse"></div>
                        </div>
                        <h3 class="quality-title">Cyber Security</h3>
                        <p class="quality-description">Dedicated to understanding and implementing robust security measures</p>
                    </div>
                    <div class="quality-card interactive-card" data-aos="zoom-in" data-aos-delay="300">
                        <div class="quality-icon-wrapper">
                            <i class="fas fa-palette quality-icon"></i>
                            <div class="icon-pulse"></div>
                        </div>
                        <h3 class="quality-title">UI/UX Design</h3>
                        <p class="quality-description">Creating intuitive and beautiful user experiences</p>
                    </div>
                </div>

                <h2 class="section-title holographic-text">About me</h2>
                <div class="content-block glass-card interactive-card">
                    <p>I am passionate about using computer science to tackle real-world challenges, with a particular focus on UI/UX Design, Artificial Intelligence, Machine Learning, and data analysis. My background combines technical skills with creative problem-solving to build intuitive and effective solutions.

                        Alongside my rigorous academic studies, I have further expanded my expertise through certifications in Google's Foundations of Cybersecurity, Python, MySQL, and Figma. I also gained hands-on experience during my internship as a Web Developer and Tester, specializing in UI/UX design and Quality Assurance.
                        
                        I was an active member of the Google Developer Student Club (GDSC) at Texas Tech, where I attended multiple workshops. Recently, I have also been attending the CodePath club's web development workshops.
                        
                        I am also deeply committed to community service, mentoring students, and engaging in environmental initiatives. Outside of academics and tech, I am an avid football player and a budding artist with a love for experimenting with drawing.</p>
                </div>

                <h2 class="section-title holographic-text">Languages</h2>
                <div class="content-block glass-card interactive-card">
                    <div class="language-skill">
                        <div class="language-header">
                            <strong>English:</strong> Proficient
                            <div class="skill-percentage">100%</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress english-progress animated-progress"></div>
                        </div>
                    </div>
                    <div class="language-skill">
                        <div class="language-header">
                            <strong>Telugu:</strong> Mother tongue
                            <div class="skill-percentage">100%</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress telugu-progress animated-progress"></div>
                        </div>
                    </div>
                    <div class="language-skill">
                        <div class="language-header">
                            <strong>Hindi:</strong> Moderate
                            <div class="skill-percentage">60%</div>
                        </div>
                        <div class="progress-bar">
                            <div class="progress hindi-progress animated-progress"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cyberpunk Masked Character -->
    <div class="floating-character" id="floating-character">
        <div class="character-avatar">
            <div class="character-hood">
                <div class="hood-pattern"></div>
            </div>
            <div class="character-face">
                <div class="character-eyes">
                    <div class="eye"></div>
                    <div class="eye"></div>
                </div>
            </div>
            <div class="character-mask">
                <div class="mask-pattern"></div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
    <script>
        // Initialize AOS
        AOS.init({
            duration: 1000,
            once: true
        });

        // Initialize Particles.js
        particlesJS('particles-js', {
            particles: {
                number: { value: 25, density: { enable: true, value_area: 1000 } },
                color: { value: ['#d4af37', '#6c63ff'] },
                shape: { type: "circle" },
                opacity: { value: 0.5, random: true },
                size: { value: 3, random: true },
                line_linked: { 
                    enable: true, 
                    distance: 150, 
                    color: "#d4af37", 
                    opacity: 0.4, 
                    width: 1 
                },
                move: { 
                    enable: true, 
                    speed: 1, 
                    direction: "none", 
                    random: false,
                    straight: false,
                    out_mode: "out",
                    bounce: false
                }
            },
            interactivity: {
                detect_on: "canvas",
                events: {
                    onhover: { enable: true, mode: "grab" },
                    onclick: { enable: true, mode: "push" },
                    resize: true
                },
                modes: {
                    grab: { distance: 140, line_linked: { opacity: 1 } },
                    push: { particles_nb: 4 }
                }
            },
            retina_detect: true
        });

        // Character and chatbot are now controlled by chatbot.js
        // This is just a placeholder for backward compatibility
        let gameState = null; // Track the state of any active games
        
        console.log('Using restored chatbot from chatbot.js');

        // Tips array
        const tips = [
            "💡 Tip: Hover over my skill cards for 3D effects!",
            "🎯 Navigate: Check out my Projects page for live demos.",
            "🏆 Achievement: 4.0 GPA & Presidential Honors student.",
            "🔧 Tech Stack: Built with Three.js, GSAP & pure skills.",
            "📱 Mobile: This site is fully responsive - try it!",
            "💬 Chat Mode: Click me once to chat, double-click to hide me!",
            "⌨️ Keyboard: Press ESC key to hide me anytime!",
            "📧 Contact: Click my email above to get in touch!",
            "🎓 Education: Computer Science at Texas Tech University.",
            "💼 Resume: Download my latest resume from the nav menu!"
        ];

        let tipIndex = 0;

        // Get speech elements if they exist
        let speech = document.getElementById('character-speech');
        let speechText = document.getElementById('character-speech-text');
        
        // Make speech bubble visible with welcome message (if it exists)
        if (speech) {
            speech.style.opacity = '1';
            speech.style.display = 'block';
            speech.style.visibility = 'visible';
        }
        
        // Welcome message (if it exists)
        if (speechText) {
            speechText.textContent = "👋 Welcome to my portfolio! Click me to chat, double-click to hide me!";
        }

        // Click functions for toggling chat and hiding
        let isBotVisible = true;
        
        // Hide chatbot function
        function toggleBotVisibility() {
            isBotVisible = !isBotVisible;
            
            const speech = document.getElementById('character-speech');
            const character = document.getElementById('floating-character');
            
            if (isBotVisible) {
                // Show bot and speech
                if (character) {
                    character.style.opacity = '1';
                    character.style.transform = 'scale(1)';
                }
                
                if (speech) {
                    speech.style.opacity = '1';
                    speech.style.display = 'block';
                    speech.style.visibility = 'visible';
                }
                console.log('Bot shown');
            } else {
                // Hide speech first
                if (speech) {
                    speech.style.opacity = '0';
                    speech.style.visibility = 'hidden';
                }
                
                // Add small animation for hiding character
                if (character && typeof gsap !== 'undefined') {
                    gsap.to(character, {
                        opacity: 0.2,
                        scale: 0.8,
                        duration: 0.3,
                        ease: "power2.out"
                    });
                } else if (character) {
                    character.style.opacity = '0.2';
                    character.style.transform = 'scale(0.8)';
                }
                
                chatMode = false;
                const chatContainer = document.getElementById('chatContainer');
                if (chatContainer) {
                    chatContainer.style.display = 'none';
                }
                console.log('Bot hidden');
            }
        }
        
        // Event handlers for the character are now managed by chatbot.js
        // Removing these event handlers to prevent conflicts
        
        /*
        // These event handlers have been moved to chatbot.js
        character.addEventListener('dblclick', (e) => {
            // Code removed to prevent conflicts
        });
        
        character.addEventListener('click', (e) => {
            // Code removed to prevent conflicts
        });
        */

        // Remove the double-click event as we now use single-click for toggling

        // Chat responses with dad jokes and better guidance
        function getChatResponse(message) {
            const text = message.toLowerCase();
            console.log('Processing message:', text);
            
            // Navigation commands
            if (text.includes('go to') || text.includes('navigate') || text.includes('take me')) {
                if (text.includes('project') || (text.includes('there') && text.includes('project'))) {
                    setTimeout(() => {
                        console.log('Navigating to projects...');
                        window.location.href = 'projects.html';
                    }, 1000);
                    return "🚀 Taking you to my Projects page! Get ready to see some cool builds!";
                }
                if (text.includes('certificate') || (text.includes('there') && text.includes('certificate'))) {
                    setTimeout(() => {
                        console.log('Navigating to certificates...');
                        window.location.href = 'certificates.html';
                    }, 1000);
                    return "🏆 Heading to my Certificates page! Check out my credentials!";
                }
                if (text.includes('resume') || (text.includes('there') && text.includes('resume'))) {
                    setTimeout(() => {
                        console.log('Opening resume...');
                        window.open('files/Vishwa_Belaganti_Resume 2025.pdf', '_blank');
                    }, 1000);
                    return "📄 Opening my resume! Take a look at my experience!";
                }
                if (text.includes('home') || (text.includes('there') && text.includes('home'))) {
                    setTimeout(() => {
                        console.log('Navigating to home...');
                        window.location.href = 'index.html';
                    }, 1000);
                    return "🏠 Going back to the Home page!";
                }
                return "🧭 Where would you like to go? Try: 'take me to projects', 'take me to certificates', or 'open resume'!";
            }
            
            // Handle help request or "what can you do" 
            if (text.includes('help') || text.includes('what can you do') || text.includes('commands') || text.includes('info')) {
                return "👋 I'm your friendly portfolio guide! Here's what I can do:\n\n" +
                    "🧭 NAVIGATION:\n" +
                    "• 'Take me to projects' - View my projects\n" +
                    "• 'Take me to certificates' - See my credentials\n" +
                    "• 'Open resume' - View my resume\n\n" +
                    "💬 INFORMATION:\n" +
                    "• Ask about my skills, education, experience\n" +
                    "• Ask about my projects or certifications\n" +
                    "• Ask about my contact info\n\n" +
                    "🎭 FUN STUFF:\n" +
                    "• Say nothing or 'whatever' for random activities\n" +
                    "• Say 'guess' followed by a number to play a game\n" +
                    "• Ask specific questions about my hobbies\n" +
                    "• Ask about my music, travel or food preferences\n" +
                    "• Try the Konami code for a secret easter egg\n\n" +
                    "⚙️ CONTROLS:\n" +
                    "• Double-click me to hide me\n" + 
                    "• Press ESC key to hide me\n" +
                    "• Click me to toggle chat mode";
            }
            
            // Handle rejections with dad jokes
            if (text.includes('no') || text.includes('nope') || text.includes('not interested') || 
                text.includes('boring') || text.includes('whatever') || text.includes('meh')) {
                const dadJokes = [
                    "Alright, alright... Here's a dad joke: Why don't scientists trust atoms? Because they make up everything! 😄",
                    "Fair enough! Dad joke time: Why did the programmer quit his job? He didn't get arrays! 💻😂",
                    "No worries! Here's one: Why do Java developers wear glasses? Because they don't C#! 👓",
                    "Okay okay... Why did the CSS file break up with HTML? It wasn't their type! 💔",
                    "Fine! Dad joke: Why do programmers prefer dark mode? Because light attracts bugs! 🐛",
                    "Alright! Here's one: What's a computer's favorite snack? Microchips! 🍟"
                ];
                return dadJokes[Math.floor(Math.random() * dadJokes.length)];
            }
            
            // Regular responses with better guidance
            if (text.includes('hi') || text.includes('hello') || text.includes('hey') || text.includes('start')) {
                return "Hey there! 👋 I'm Vishwa, your AI portfolio guide! I can help you navigate around. Try: 'take me to projects', 'take me to certificates', or ask about my skills!";
            }
            
            if (text.includes('project') || text.includes('work') || text.includes('portfolio')) {
                return "I've built some really cool stuff! 🚀 From 3D web experiences to AI models. Say 'take me to projects' to see them all, or check out my GitHub!";
            }
            
            if (text.includes('skill') || text.includes('tech') || text.includes('programming')) {
                return "Full-stack developer with Python, JavaScript, React, and AI/ML expertise! 💻 This 3D portfolio site? Built with pure HTML/CSS/JS, Three.js, and GSAP - no frameworks needed!";
            }
            
            if (text.includes('school') || text.includes('education') || text.includes('university') || text.includes('college')) {
                return "Computer Science @ Texas Tech University! 🎓 Maintaining a 4.0 GPA with Presidential Honors. Part of GDSC and CodePath workshops!";
            }
            
            if (text.includes('contact') || text.includes('email') || text.includes('reach') || text.includes('hire')) {
                return "You can contact Vishwa through email at vishwa.belaganti@gmail.com or connect on LinkedIn.";
            }
            
            if (text.includes('certificate') || text.includes('credential') || text.includes('qualification')) {
                return "I've earned certifications in Google Cybersecurity, Python programming, MySQL databases, and Figma design! 🏆 Say 'take me to certificates' to see them all!";
            }
            
            if (text.includes('about') || text.includes('who are you') || text.includes('tell me about yourself')) {
                return "I'm a passionate CS student at Texas Tech with a 4.0 GPA! 🎓 I love AI, cybersecurity, and creating beautiful user experiences. When I'm not coding, you'll find me on the football field, creating digital art, or experimenting with fusion cooking - my specialty is Korean-Mexican fusion tacos that my friends rate 11/10!";
            }
            
            if (text.includes('food') || text.includes('eat') || text.includes('cooking') || text.includes('recipe')) {
                return "🍜 I'm a self-taught home chef specializing in global fusion! My signature dish? Korean gochujang-marinated steak tacos with kimchi slaw and lime crema - coding and cooking both require creativity and precision! I'm also developing an app that suggests recipes based on what's in your fridge using computer vision. Food and tech - my two passions combined!";
            }
            
            if (text.includes('travel') || text.includes('vacation') || text.includes('places') || text.includes('visit')) {
                return "✈️ I've backpacked through 14 countries so far! Most memorable? Coding a machine learning model in a cafe overlooking Tokyo's Shibuya Crossing. My dream destination is Iceland to see the Northern Lights while working on my cybersecurity research. Every place I visit inspires different coding projects - travel broadens the mind AND the GitHub profile!";
            }
            
            if (text.includes('football') || text.includes('sports') || text.includes('soccer')) {
                return "⚽ Football isn't just a sport for me—it's my reset button! Playing forward position at Texas Tech intramurals. That feeling when you score the perfect goal? Pure dopamine! I also apply football strategy to coding: quick pivots, team coordination, and always keeping an eye on the goal!";
            }
            
            if (text.includes('art') || text.includes('drawing') || text.includes('creative')) {
                return "🎨 Art is my second coding language! I create cyberpunk-inspired digital illustrations that blend technology with humanity. My latest piece? A neon-lit cityscape with augmented reality elements. I believe good developers must also be artists—we're creating experiences, not just code!";
            }
            
            if (text.includes('hobbies') || text.includes('interests') || text.includes('free time')) {
                return "Outside of coding? I'm all about that balance! 🔄\n\n• ⚽ Playing competitive football (striker position)\n• 🎨 Digital art and cyberpunk illustrations\n• 🎸 Learning electric guitar (currently mastering Metallica solos)\n• 🏕️ Weekend hiking trips to disconnect from screens\n• 🎮 Building my own indie game about a hacker in a dystopian future\n\nWant to hear more about any of these? Just ask!";
            }
            
            if (text.includes('cool') || text.includes('awesome') || text.includes('amazing') || text.includes('nice') || text.includes('impressive')) {
                const responses = [
                    "Thanks! 😊 I put my heart into everything I build. Every line of code and design element is crafted with passion. Want to see more? Try 'take me to projects'!",
                    "Appreciate it! This portfolio site took me 47 energy drinks and countless hours to perfect. The particle system alone was 3 days of math I thought I'd forgotten from calculus! 🧠💻",
                    "Thanks for noticing! As a perfectionist, I actually refactored this entire portfolio 4 times before I was happy with it. The animations are synchronized to create what I call 'digital harmony' - subtle but impactful!",
                    "Awesome to hear! Fun fact: This site actually changes subtle elements based on your time of day - the particles move slower at night to create a calmer experience. Details matter! ✨"
                ];
                return responses[Math.floor(Math.random() * responses.length)];
            }
            
            // Check for responses to suggestions
            if ((text.includes('yes') || text.includes('sure') || text.includes('okay') || 
                text.includes('ok') || text.includes('alright') || text.includes('go ahead')) && 
                lastSuggestion) {
                    
                console.log('User accepted suggestion:', lastSuggestion);
                
                if (lastSuggestion === 'joke') {
                    const jokes = [
                        "Why did the programmer quit his job? Because he didn't get arrays! 💻😂",
                        "Why do Java developers wear glasses? Because they don't C#! 👓",
                        "Why did the HTML and CSS file break up? Irreconcilable differences—they couldn't agree on their positions! 💔",
                        "How many programmers does it take to change a light bulb? None, that's a hardware problem! 💡",
                        "Why was the JavaScript developer sad? Because he didn't Node how to Express himself! 😢"
                    ];
                    return jokes[Math.floor(Math.random() * jokes.length)];
                }
                
                if (lastSuggestion === 'game') {
                    return "🎮 Let's play a quick guessing game! I'm thinking of a number between 1-10. Type 'guess' followed by your number. If you get it right, I'll show you a secret Easter egg on this site!";
                }
                
                if (lastSuggestion === 'fact') {
                    const facts = [
                        "🌟 Fun fact: I built an AI chess bot that beat our university's chess club president!",
                        "🌐 Cool fact: My cybersecurity app detected and prevented a real phishing attack during a university hackathon!",
                        "🔐 Insider fact: I'm currently working on a stealth blockchain project that will revolutionize academic credential verification!",
                        "💡 Tech fact: I once debugged a critical production issue at 3 AM and saved my internship company thousands of dollars!",
                        "🎓 Personal fact: I taught myself to code by building a text-based RPG at age 13!"
                    ];
                    return facts[Math.floor(Math.random() * facts.length)];
                }
                
                if (lastSuggestion === 'music') {
                    return "🎵 My coding playlist is a mix of synthwave, lo-fi, and progressive metal! When I'm debugging, it's Polyphia's intricate guitar work. For focused coding sessions, I switch to Tycho or Boards of Canada. For late-night hackathons? Synthwave artists like The Midnight and FM-84 keep me in the zone! My favorite coding album is actually 'Endless Fantasy' by Anamanaguchi - perfect blend of chiptune energy and focus. I'm also working on an AI that composes music based on my coding patterns - the tempo increases when I make more commits!";
                }
                
                // Reset the suggestion after responding
                lastSuggestion = null;
            }
            
            // Generate a random suggestion for empty or vague inputs
            if (text.trim() === '' || text.length < 3 || text.includes('hmm') || text.includes('uhh') || 
                text === 'hi' || text === 'um' || text.includes('whatever') || text.includes('anything')) {
                
                unwantedResponseCount++; // Increment the counter for vague inputs
                console.log('Unwanted response count:', unwantedResponseCount);
                
                if (unwantedResponseCount >= 2) {
                    // After 2 vague inputs, show choice menu
                    return createOptionsMenu("I see you might need some suggestions! What would you like to do?",
                        [
                            {label: "Tell me a joke", value: "joke"},
                            {label: "Let's play a game", value: "game"},
                            {label: "Share a tech fact", value: "fact"},
                            {label: "Your music taste", value: "music"},
                            {label: "Your hobbies", value: "hobbies"}
                        ]
                    );
                }
                
                const suggestions = ['joke', 'game', 'fact', 'music'];
                lastSuggestion = suggestions[Math.floor(Math.random() * suggestions.length)];
                
                if (lastSuggestion === 'joke') {
                    return "You seem unsure what to ask! How about I tell you a programmer dad joke? Say 'yes' if you'd like one!";
                }
                if (lastSuggestion === 'game') {
                    return "Not sure what to talk about? Want to play a quick guessing game? Say 'yes' if you're in!";
                }
                if (lastSuggestion === 'fact') {
                    return "Looking for something interesting? Want to hear a fun fact about my tech adventures? Say 'yes'!";
                }
                if (lastSuggestion === 'music') {
                    return "Need inspiration? Would you like to know what music I listen to while coding? Say 'yes' if interested!";
                }
            } else {
                // Reset counter if user provides meaningful input
                unwantedResponseCount = 0;
            }
            
            // Basic implementation for guessing without game state
            if (text.includes('guess') && !gameState) {
                const userGuess = parseInt(text.replace(/[^0-9]/g, ''));
                const correctNumber = 7; // Fixed number for simplicity
                
                if (isNaN(userGuess)) {
                    return "Please guess a number between 1-10. For example, 'guess 5'";
                }
                
                if (userGuess === correctNumber) {
                    return "🎉 You got it! The number was 7! Here's your easter egg: Press the Konami code (↑↑↓↓←→←→BA) anywhere on my site for a surprise animation! Try it!";
                } else if (userGuess < correctNumber) {
                    return "Higher! Try again with 'guess [number]'";
                } else {
                    return "Lower! Try again with 'guess [number]'";
                }
            }
            
            // Function to initialize games
            function initializeGame(gameType) {
                switch (gameType) {
                    case 'number-guess':
                        gameState = {
                            game: 'number-guess',
                            target: Math.floor(Math.random() * 100) + 1, // Random number 1-100
                            attempts: 0,
                            maxAttempts: 10
                        };
                        renderNumberGuessGame();
                        break;
                    case 'hangman':
                        const words = ['javascript', 'python', 'algorithm', 'function', 'variable', 
                                     'database', 'interface', 'repository', 'framework', 'compiler'];
                        const randomWord = words[Math.floor(Math.random() * words.length)];
                        
                        gameState = {
                            game: 'hangman',
                            word: randomWord,
                            guessed: Array(randomWord.length).fill('_'),
                            wrongGuesses: [],
                            maxWrongGuesses: 6
                        };
                        renderHangmanGame();
                        break;
                    case 'quiz':
                        const quizQuestions = [
                            {
                                question: "Which programming language was created first?",
                                options: ["Python", "JavaScript", "Fortran", "C++"],
                                answer: 2 // Fortran
                            },
                            {
                                question: "What does CPU stand for?",
                                options: ["Central Processing Unit", "Computer Personal Unit", 
                                          "Central Process Utility", "Computer Processing Unit"],
                                answer: 0
                            },
                            {
                                question: "Which company developed React.js?",
                                options: ["Google", "Microsoft", "Facebook", "Amazon"],
                                answer: 2
                            }
                        ];
                        
                        gameState = {
                            game: 'quiz',
                            questions: quizQuestions,
                            currentQuestion: 0,
                            score: 0
                        };
                        renderQuizGame();
                        break;
                }
            }
            
            // Number Guessing Game
            function renderNumberGuessGame() {
                const gameContainer = document.createElement('div');
                gameContainer.className = 'game-container number-guess-game';
                gameContainer.style.backgroundColor = 'rgba(20, 20, 40, 0.85)';
                gameContainer.style.borderRadius = '10px';
                gameContainer.style.padding = '15px';
                gameContainer.style.marginTop = '15px';
                gameContainer.style.border = '2px solid rgba(108, 99, 255, 0.6)';
                gameContainer.style.boxShadow = '0 0 15px rgba(108, 99, 255, 0.3)';
                
                // Game title
                const title = document.createElement('div');
                title.innerText = '🎮 Number Guessing Game 🎮';
                title.style.color = '#6c63ff';
                title.style.fontSize = '16px';
                title.style.fontWeight = 'bold';
                title.style.textAlign = 'center';
                title.style.marginBottom = '10px';
                gameContainer.appendChild(title);
                
                // Game instructions
                const instructions = document.createElement('div');
                instructions.innerText = `I'm thinking of a number between 1-100. You have ${gameState.maxAttempts} attempts to guess it!`;
                instructions.style.color = 'white';
                instructions.style.marginBottom = '15px';
                instructions.style.fontSize = '14px';
                gameContainer.appendChild(instructions);
                
                // Status display
                const status = document.createElement('div');
                status.id = 'number-guess-status';
                status.innerText = `Attempts: ${gameState.attempts}/${gameState.maxAttempts}`;
                status.style.marginBottom = '15px';
                status.style.color = 'rgba(255, 255, 255, 0.8)';
                gameContainer.appendChild(status);
                
                // Input area
                const inputArea = document.createElement('div');
                inputArea.style.display = 'flex';
                inputArea.style.gap = '10px';
                
                const input = document.createElement('input');
                input.type = 'number';
                input.min = '1';
                input.max = '100';
                input.placeholder = 'Enter your guess';
                input.style.flex = '1';
                input.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
                input.style.border = '1px solid rgba(108, 99, 255, 0.3)';
                input.style.borderRadius = '5px';
                input.style.padding = '8px';
                input.style.color = 'white';
                inputArea.appendChild(input);
                
                const submitButton = document.createElement('button');
                submitButton.innerText = 'Guess';
                submitButton.style.backgroundColor = 'rgba(108, 99, 255, 0.6)';
                submitButton.style.border = 'none';
                submitButton.style.borderRadius = '5px';
                submitButton.style.padding = '8px 15px';
                submitButton.style.color = 'white';
                submitButton.style.cursor = 'pointer';
                
                submitButton.onclick = () => {
                    const guess = parseInt(input.value);
                    if (isNaN(guess) || guess < 1 || guess > 100) {
                        alert('Please enter a valid number between 1-100');
                        return;
                    }
                    
                    handleNumberGuess(guess, status, gameContainer);
                    input.value = '';
                };
                
                inputArea.appendChild(submitButton);
                gameContainer.appendChild(inputArea);
                
                // Exit button
                const exitButton = document.createElement('button');
                exitButton.innerText = 'Exit Game';
                exitButton.style.display = 'block';
                exitButton.style.width = '100%';
                exitButton.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                exitButton.style.border = 'none';
                exitButton.style.borderRadius = '5px';
                exitButton.style.padding = '8px';
                exitButton.style.marginTop = '15px';
                exitButton.style.color = 'white';
                exitButton.style.cursor = 'pointer';
                
                exitButton.onclick = () => {
                    if (speech.contains(gameContainer)) {
                        speech.removeChild(gameContainer);
                    }
                    gameState = null;
                    speechText.textContent = "Game exited! Let me know if you want to play again.";
                };
                
                gameContainer.appendChild(exitButton);
                
                // Add to speech bubble
                clearSpeechGameContainers();
                speech.appendChild(gameContainer);
                speechText.textContent = "Number Guessing Game launched!";
            }
            
            function handleNumberGuess(guess, statusElement, gameContainer) {
                gameState.attempts++;
                
                if (guess === gameState.target) {
                    // Win
                    gameContainer.innerHTML = '';
                    gameContainer.style.textAlign = 'center';
                    
                    const winMessage = document.createElement('div');
                    winMessage.innerHTML = `🎉 YOU WIN! 🎉<br>You guessed the number ${gameState.target} in ${gameState.attempts} attempts!`;
                    winMessage.style.color = '#6c63ff';
                    winMessage.style.fontSize = '16px';
                    winMessage.style.fontWeight = 'bold';
                    winMessage.style.marginBottom = '20px';
                    gameContainer.appendChild(winMessage);
                    
                    const playAgainBtn = document.createElement('button');
                    playAgainBtn.innerText = 'Play Again';
                    playAgainBtn.style.backgroundColor = 'rgba(108, 99, 255, 0.6)';
                    playAgainBtn.style.border = 'none';
                    playAgainBtn.style.borderRadius = '5px';
                    playAgainBtn.style.padding = '8px 15px';
                    playAgainBtn.style.margin = '10px';
                    playAgainBtn.style.color = 'white';
                    playAgainBtn.style.cursor = 'pointer';
                    
                    playAgainBtn.onclick = () => {
                        initializeGame('number-guess');
                    };
                    
                    const exitBtn = document.createElement('button');
                    exitBtn.innerText = 'Exit';
                    exitBtn.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                    exitBtn.style.border = 'none';
                    exitBtn.style.borderRadius = '5px';
                    exitBtn.style.padding = '8px 15px';
                    exitBtn.style.margin = '10px';
                    exitBtn.style.color = 'white';
                    exitBtn.style.cursor = 'pointer';
                    
                    exitBtn.onclick = () => {
                        if (speech.contains(gameContainer)) {
                            speech.removeChild(gameContainer);
                        }
                        gameState = null;
                        speechText.textContent = "Game exited! Let me know if you want to play again.";
                    };
                    
                    gameContainer.appendChild(playAgainBtn);
                    gameContainer.appendChild(exitBtn);
                    
                } else if (gameState.attempts >= gameState.maxAttempts) {
                    // Lose
                    gameContainer.innerHTML = '';
                    gameContainer.style.textAlign = 'center';
                    
                    const loseMessage = document.createElement('div');
                    loseMessage.innerHTML = `Game Over! The number was ${gameState.target}.<br>Better luck next time!`;
                    loseMessage.style.color = 'rgba(255, 99, 99, 0.9)';
                    loseMessage.style.fontSize = '16px';
                    loseMessage.style.marginBottom = '20px';
                    gameContainer.appendChild(loseMessage);
                    
                    const playAgainBtn = document.createElement('button');
                    playAgainBtn.innerText = 'Play Again';
                    playAgainBtn.style.backgroundColor = 'rgba(108, 99, 255, 0.6)';
                    playAgainBtn.style.border = 'none';
                    playAgainBtn.style.borderRadius = '5px';
                    playAgainBtn.style.padding = '8px 15px';
                    playAgainBtn.style.margin = '10px';
                    playAgainBtn.style.color = 'white';
                    playAgainBtn.style.cursor = 'pointer';
                    
                    playAgainBtn.onclick = () => {
                        initializeGame('number-guess');
                    };
                    
                    const exitBtn = document.createElement('button');
                    exitBtn.innerText = 'Exit';
                    exitBtn.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                    exitBtn.style.border = 'none';
                    exitBtn.style.borderRadius = '5px';
                    exitBtn.style.padding = '8px 15px';
                    exitBtn.style.margin = '10px';
                    exitBtn.style.color = 'white';
                    exitBtn.style.cursor = 'pointer';
                    
                    exitBtn.onclick = () => {
                        if (speech.contains(gameContainer)) {
                            speech.removeChild(gameContainer);
                        }
                        gameState = null;
                        speechText.textContent = "Game exited! Let me know if you want to play again.";
                    };
                    
                    gameContainer.appendChild(playAgainBtn);
                    gameContainer.appendChild(exitBtn);
                    
                } else {
                    // Continue game
                    statusElement.innerText = `Attempts: ${gameState.attempts}/${gameState.maxAttempts}\n${guess < gameState.target ? 'Higher! ⬆️' : 'Lower! ⬇️'}`;
                    statusElement.style.color = 'white';
                }
            }
            
            // Hangman Game
            function renderHangmanGame() {
                const gameContainer = document.createElement('div');
                gameContainer.className = 'game-container hangman-game';
                gameContainer.style.backgroundColor = 'rgba(20, 20, 40, 0.85)';
                gameContainer.style.borderRadius = '10px';
                gameContainer.style.padding = '15px';
                gameContainer.style.marginTop = '15px';
                gameContainer.style.border = '2px solid rgba(108, 99, 255, 0.6)';
                
                // Game title
                const title = document.createElement('div');
                title.innerText = '🎮 Hangman: Programming Terms 🎮';
                title.style.color = '#6c63ff';
                title.style.fontSize = '16px';
                title.style.fontWeight = 'bold';
                title.style.textAlign = 'center';
                title.style.marginBottom = '10px';
                gameContainer.appendChild(title);
                
                // Word display
                const wordDisplay = document.createElement('div');
                wordDisplay.className = 'hangman-word';
                wordDisplay.style.letterSpacing = '5px';
                wordDisplay.style.fontSize = '20px';
                wordDisplay.style.fontFamily = 'monospace';
                wordDisplay.style.textAlign = 'center';
                wordDisplay.style.marginBottom = '15px';
                wordDisplay.style.color = 'white';
                wordDisplay.innerText = gameState.guessed.join(' ');
                gameContainer.appendChild(wordDisplay);
                
                // Hangman figure
                const hangmanFigure = document.createElement('div');
                hangmanFigure.className = 'hangman-figure';
                hangmanFigure.style.height = '100px';
                hangmanFigure.style.margin = '0 auto';
                hangmanFigure.style.position = 'relative';
                hangmanFigure.style.width = '100px';
                hangmanFigure.style.border = '1px solid rgba(255, 255, 255, 0.2)';
                hangmanFigure.style.marginBottom = '15px';
                
                // Draw hangman based on wrong guesses
                updateHangmanFigure(hangmanFigure, gameState.wrongGuesses.length);
                gameContainer.appendChild(hangmanFigure);
                
                // Wrong guesses
                const wrongGuessesDisplay = document.createElement('div');
                wrongGuessesDisplay.innerText = `Wrong guesses (${gameState.wrongGuesses.length}/${gameState.maxWrongGuesses}): ${gameState.wrongGuesses.join(', ')}`;
                wrongGuessesDisplay.style.marginBottom = '15px';
                wrongGuessesDisplay.style.color = 'rgba(255, 99, 99, 0.9)';
                gameContainer.appendChild(wrongGuessesDisplay);
                
                // Letter buttons
                const lettersContainer = document.createElement('div');
                lettersContainer.style.display = 'flex';
                lettersContainer.style.flexWrap = 'wrap';
                lettersContainer.style.justifyContent = 'center';
                lettersContainer.style.gap = '5px';
                lettersContainer.style.marginBottom = '15px';
                
                for (let i = 0; i < 26; i++) {
                    const letter = String.fromCharCode(97 + i); // a-z
                    const letterButton = document.createElement('button');
                    letterButton.innerText = letter;
                    letterButton.style.width = '30px';
                    letterButton.style.height = '30px';
                    letterButton.style.backgroundColor = 'rgba(108, 99, 255, 0.6)';
                    letterButton.style.border = 'none';
                    letterButton.style.borderRadius = '5px';
                    letterButton.style.color = 'white';
                    letterButton.style.cursor = 'pointer';
                    
                    // Disable if already guessed
                    if (gameState.wrongGuesses.includes(letter) || gameState.word.includes(letter) && !gameState.guessed.includes('_')) {
                        letterButton.disabled = true;
                        letterButton.style.backgroundColor = 'rgba(100, 100, 100, 0.5)';
                        letterButton.style.cursor = 'default';
                    }
                    
                    letterButton.onclick = () => {
                        if (!letterButton.disabled) {
                            handleHangmanGuess(letter, wordDisplay, wrongGuessesDisplay, hangmanFigure, letterButton, gameContainer);
                        }
                    };
                    
                    lettersContainer.appendChild(letterButton);
                }
                
                gameContainer.appendChild(lettersContainer);
                
                // Exit button
                const exitButton = document.createElement('button');
                exitButton.innerText = 'Exit Game';
                exitButton.style.display = 'block';
                exitButton.style.width = '100%';
                exitButton.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                exitButton.style.border = 'none';
                exitButton.style.borderRadius = '5px';
                exitButton.style.padding = '8px';
                exitButton.style.marginTop = '10px';
                exitButton.style.color = 'white';
                exitButton.style.cursor = 'pointer';
                
                exitButton.onclick = () => {
                    if (speech.contains(gameContainer)) {
                        speech.removeChild(gameContainer);
                    }
                    gameState = null;
                    speechText.textContent = "Game exited! Let me know if you want to play again.";
                };
                
                gameContainer.appendChild(exitButton);
                
                // Add to speech bubble
                clearSpeechGameContainers();
                speech.appendChild(gameContainer);
                speechText.textContent = "Hangman Game launched!";
            }
            
            function updateHangmanFigure(figureElement, wrongGuesses) {
                const hangmanParts = [
                    // Head
                    '<div style="position:absolute;width:20px;height:20px;border-radius:50%;border:2px solid white;top:10px;left:39px;"></div>',
                    // Body
                    '<div style="position:absolute;width:2px;height:30px;background-color:white;top:30px;left:50px;"></div>',
                    // Left arm
                    '<div style="position:absolute;width:20px;height:2px;background-color:white;top:35px;left:30px;transform:rotate(30deg);"></div>',
                    // Right arm
                    '<div style="position:absolute;width:20px;height:2px;background-color:white;top:35px;left:50px;transform:rotate(-30deg);"></div>',
                    // Left leg
                    '<div style="position:absolute;width:20px;height:2px;background-color:white;top:60px;left:30px;transform:rotate(-30deg);"></div>',
                    // Right leg
                    '<div style="position:absolute;width:20px;height:2px;background-color:white;top:60px;left:50px;transform:rotate(30deg);"></div>'
                ];
                
                // Reset figure
                figureElement.innerHTML = `
                    <div style="position:absolute;width:60px;height:2px;background-color:white;top:0;left:20px;"></div>
                    <div style="position:absolute;width:2px;height:80px;background-color:white;top:0;left:20px;"></div>
                    <div style="position:absolute;width:40px;height:2px;background-color:white;bottom:0;left:0;"></div>
                `;
                
                // Add parts based on wrong guesses
                for (let i = 0; i < wrongGuesses; i++) {
                    if (i < hangmanParts.length) {
                        figureElement.innerHTML += hangmanParts[i];
                    }
                }
            }
            
            function handleHangmanGuess(letter, wordDisplay, wrongGuessesDisplay, hangmanFigure, letterButton, gameContainer) {
                letterButton.disabled = true;
                letterButton.style.backgroundColor = 'rgba(100, 100, 100, 0.5)';
                
                if (gameState.word.includes(letter)) {
                    // Correct guess
                    for (let i = 0; i < gameState.word.length; i++) {
                        if (gameState.word[i] === letter) {
                            gameState.guessed[i] = letter;
                        }
                    }
                    wordDisplay.innerText = gameState.guessed.join(' ');
                    
                    // Check for win
                    if (!gameState.guessed.includes('_')) {
                        // Win!
                        gameContainer.innerHTML = '';
                        gameContainer.style.textAlign = 'center';
                        
                        const winMessage = document.createElement('div');
                        winMessage.innerHTML = `🎉 YOU WIN! 🎉<br>The word was: ${gameState.word}`;
                        winMessage.style.color = '#6c63ff';
                        winMessage.style.fontSize = '18px';
                        winMessage.style.fontWeight = 'bold';
                        winMessage.style.marginBottom = '20px';
                        gameContainer.appendChild(winMessage);
                        
                        const playAgainBtn = document.createElement('button');
                        playAgainBtn.innerText = 'Play Again';
                        playAgainBtn.style.backgroundColor = 'rgba(108, 99, 255, 0.6)';
                        playAgainBtn.style.border = 'none';
                        playAgainBtn.style.borderRadius = '5px';
                        playAgainBtn.style.padding = '8px 15px';
                        playAgainBtn.style.margin = '10px';
                        playAgainBtn.style.color = 'white';
                        playAgainBtn.style.cursor = 'pointer';
                        
                        playAgainBtn.onclick = () => {
                            initializeGame('hangman');
                        };
                        
                        const exitBtn = document.createElement('button');
                        exitBtn.innerText = 'Exit';
                        exitBtn.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                        exitBtn.style.border = 'none';
                        exitBtn.style.borderRadius = '5px';
                        exitBtn.style.padding = '8px 15px';
                        exitBtn.style.margin = '10px';
                        exitBtn.style.color = 'white';
                        exitBtn.style.cursor = 'pointer';
                        
                        exitBtn.onclick = () => {
                            if (speech.contains(gameContainer)) {
                                speech.removeChild(gameContainer);
                            }
                            gameState = null;
                            speechText.textContent = "Game exited! Let me know if you want to play again.";
                        };
                        
                        gameContainer.appendChild(playAgainBtn);
                        gameContainer.appendChild(exitBtn);
                    }
                } else {
                    // Wrong guess
                    gameState.wrongGuesses.push(letter);
                    wrongGuessesDisplay.innerText = `Wrong guesses (${gameState.wrongGuesses.length}/${gameState.maxWrongGuesses}): ${gameState.wrongGuesses.join(', ')}`;
                    updateHangmanFigure(hangmanFigure, gameState.wrongGuesses.length);
                    
                    // Check for loss
                    if (gameState.wrongGuesses.length >= gameState.maxWrongGuesses) {
                        // Loss!
                        gameContainer.innerHTML = '';
                        gameContainer.style.textAlign = 'center';
                        
                        const loseMessage = document.createElement('div');
                        loseMessage.innerHTML = `Game Over! The word was: ${gameState.word}`;
                        loseMessage.style.color = 'rgba(255, 99, 99, 0.9)';
                        loseMessage.style.fontSize = '18px';
                        loseMessage.style.marginBottom = '20px';
                        gameContainer.appendChild(loseMessage);
                        
                        const playAgainBtn = document.createElement('button');
                        playAgainBtn.innerText = 'Play Again';
                        playAgainBtn.style.backgroundColor = 'rgba(108, 99, 255, 0.6)';
                        playAgainBtn.style.border = 'none';
                        playAgainBtn.style.borderRadius = '5px';
                        playAgainBtn.style.padding = '8px 15px';
                        playAgainBtn.style.margin = '10px';
                        playAgainBtn.style.color = 'white';
                        playAgainBtn.style.cursor = 'pointer';
                        
                        playAgainBtn.onclick = () => {
                            initializeGame('hangman');
                        };
                        
                        const exitBtn = document.createElement('button');
                        exitBtn.innerText = 'Exit';
                        exitBtn.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                        exitBtn.style.border = 'none';
                        exitBtn.style.borderRadius = '5px';
                        exitBtn.style.padding = '8px 15px';
                        exitBtn.style.margin = '10px';
                        exitBtn.style.color = 'white';
                        exitBtn.style.cursor = 'pointer';
                        
                        exitBtn.onclick = () => {
                            if (speech.contains(gameContainer)) {
                                speech.removeChild(gameContainer);
                            }
                            gameState = null;
                            speechText.textContent = "Game exited! Let me know if you want to play again.";
                        };
                        
                        gameContainer.appendChild(playAgainBtn);
                        gameContainer.appendChild(exitBtn);
                    }
                }
            }
            
            // Quiz Game
            function renderQuizGame() {
                const gameContainer = document.createElement('div');
                gameContainer.className = 'game-container quiz-game';
                gameContainer.style.backgroundColor = 'rgba(20, 20, 40, 0.85)';
                gameContainer.style.borderRadius = '10px';
                gameContainer.style.padding = '15px';
                gameContainer.style.marginTop = '15px';
                gameContainer.style.border = '2px solid rgba(108, 99, 255, 0.6)';
                
                // Game title
                const title = document.createElement('div');
                title.innerText = '🎮 Tech Trivia Quiz 🎮';
                title.style.color = '#6c63ff';
                title.style.fontSize = '16px';
                title.style.fontWeight = 'bold';
                title.style.textAlign = 'center';
                title.style.marginBottom = '10px';
                gameContainer.appendChild(title);
                
                // Progress display
                const progress = document.createElement('div');
                progress.innerText = `Question ${gameState.currentQuestion + 1}/${gameState.questions.length}`;
                progress.style.textAlign = 'center';
                progress.style.marginBottom = '15px';
                progress.style.color = 'rgba(255, 255, 255, 0.8)';
                gameContainer.appendChild(progress);
                
                // Question
                const questionElement = document.createElement('div');
                questionElement.innerText = gameState.questions[gameState.currentQuestion].question;
                questionElement.style.fontSize = '16px';
                questionElement.style.marginBottom = '15px';
                questionElement.style.color = 'white';
                questionElement.style.textAlign = 'center';
                gameContainer.appendChild(questionElement);
                
                // Options
                const options = gameState.questions[gameState.currentQuestion].options;
                options.forEach((option, index) => {
                    const optionButton = document.createElement('button');
                    optionButton.innerText = option;
                    optionButton.style.display = 'block';
                    optionButton.style.width = '100%';
                    optionButton.style.backgroundColor = 'rgba(60, 60, 100, 0.7)';
                    optionButton.style.border = '1px solid rgba(108, 99, 255, 0.3)';
                    optionButton.style.borderRadius = '5px';
                    optionButton.style.padding = '8px 12px';
                    optionButton.style.margin = '8px 0';
                    optionButton.style.color = 'white';
                    optionButton.style.cursor = 'pointer';
                    optionButton.style.textAlign = 'left';
                    
                    optionButton.onclick = () => {
                        handleQuizAnswer(index, gameContainer);
                    };
                    
                    gameContainer.appendChild(optionButton);
                });
                
                // Exit button
                const exitButton = document.createElement('button');
                exitButton.innerText = 'Exit Quiz';
                exitButton.style.display = 'block';
                exitButton.style.width = '100%';
                exitButton.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                exitButton.style.border = 'none';
                exitButton.style.borderRadius = '5px';
                exitButton.style.padding = '8px';
                exitButton.style.marginTop = '15px';
                exitButton.style.color = 'white';
                exitButton.style.cursor = 'pointer';
                
                exitButton.onclick = () => {
                    if (speech.contains(gameContainer)) {
                        speech.removeChild(gameContainer);
                    }
                    gameState = null;
                    speechText.textContent = "Quiz exited! Let me know if you want to play again.";
                };
                
                gameContainer.appendChild(exitButton);
                
                // Add to speech bubble
                clearSpeechGameContainers();
                speech.appendChild(gameContainer);
                speechText.textContent = "Tech Trivia Quiz launched!";
            }
            
            function handleQuizAnswer(selectedIndex, gameContainer) {
                const currentQuestion = gameState.questions[gameState.currentQuestion];
                const isCorrect = selectedIndex === currentQuestion.answer;
                
                if (isCorrect) {
                    gameState.score++;
                }
                
                // Move to next question
                gameState.currentQuestion++;
                
                // Check if quiz is complete
                if (gameState.currentQuestion >= gameState.questions.length) {
                    // Quiz complete
                    gameContainer.innerHTML = '';
                    gameContainer.style.textAlign = 'center';
                    
                    const resultMessage = document.createElement('div');
                    resultMessage.innerHTML = `Quiz Complete!<br>Your Score: ${gameState.score}/${gameState.questions.length}`;
                    resultMessage.style.color = '#6c63ff';
                    resultMessage.style.fontSize = '18px';
                    resultMessage.style.fontWeight = 'bold';
                    resultMessage.style.marginBottom = '15px';
                    gameContainer.appendChild(resultMessage);
                    
                    // Feedback based on score
                    const feedbackElement = document.createElement('div');
                    let feedback;
                    if (gameState.score === gameState.questions.length) {
                        feedback = "Perfect score! You're a tech genius! 🏆";
                    } else if (gameState.score >= gameState.questions.length * 0.7) {
                        feedback = "Great job! You know your tech! 🎉";
                    } else if (gameState.score >= gameState.questions.length * 0.5) {
                        feedback = "Not bad! You've got decent tech knowledge. 👍";
                    } else {
                        feedback = "Keep learning! Tech is always evolving. 📚";
                    }
                    feedbackElement.innerText = feedback;
                    feedbackElement.style.marginBottom = '20px';
                    feedbackElement.style.color = 'rgba(255, 255, 255, 0.9)';
                    gameContainer.appendChild(feedbackElement);
                    
                    // Play again button
                    const playAgainBtn = document.createElement('button');
                    playAgainBtn.innerText = 'Play Again';
                    playAgainBtn.style.backgroundColor = 'rgba(108, 99, 255, 0.6)';
                    playAgainBtn.style.border = 'none';
                    playAgainBtn.style.borderRadius = '5px';
                    playAgainBtn.style.padding = '8px 15px';
                    playAgainBtn.style.margin = '10px';
                    playAgainBtn.style.color = 'white';
                    playAgainBtn.style.cursor = 'pointer';
                    
                    playAgainBtn.onclick = () => {
                        initializeGame('quiz');
                    };
                    
                    // Exit button
                    const exitBtn = document.createElement('button');
                    exitBtn.innerText = 'Exit';
                    exitBtn.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
                    exitBtn.style.border = 'none';
                    exitBtn.style.borderRadius = '5px';
                    exitBtn.style.padding = '8px 15px';
                    exitBtn.style.margin = '10px';
                    exitBtn.style.color = 'white';
                    exitBtn.style.cursor = 'pointer';
                    
                    exitBtn.onclick = () => {
                        if (speech.contains(gameContainer)) {
                            speech.removeChild(gameContainer);
                        }
                        gameState = null;
                        speechText.textContent = "Quiz exited! Let me know if you want to play again.";
                    };
                    
                    gameContainer.appendChild(playAgainBtn);
                    gameContainer.appendChild(exitBtn);
                } else {
                    // Show next question
                    renderQuizGame();
                }
            }
            
            // Handle game interactions through text input
            function handleGameInteraction(text) {
                if (gameState.game === 'number-guess') {
                    const guess = parseInt(text.replace(/[^0-9]/g, ''));
                    if (!isNaN(guess)) {
                        if (guess === gameState.target) {
                            gameState = null;
                            return "🎉 Correct! You guessed my number!";
                        } else if (guess < gameState.target) {
                            return "Higher! Try again.";
                        } else {
                            return "Lower! Try again.";
                        }
                    } else {
                        return "Please enter a valid number. Or use the game interface above!";
                    }
                }
                
                if (gameState.game === 'hangman') {
                    if (text.length === 1 && text.match(/[a-z]/i)) {
                        const letter = text.toLowerCase();
                        if (gameState.word.includes(letter)) {
                            return "Good guess! That letter is in the word.";
                        } else {
                            return "Sorry, that letter isn't in the word.";
                        }
                    } else if (text === gameState.word) {
                        gameState = null;
                        return "🎉 Correct! You guessed the word: " + text;
                    } else {
                        return "Please enter a single letter or guess the full word.";
                    }
                }
                
                return "I didn't understand that. Try using the game interface above!";
            }
            
            // Function to clear any existing game containers in the speech bubble
            function clearSpeechGameContainers() {
                const speech = document.getElementById('character-speech');
                if (!speech) return;
                
                const containers = speech.querySelectorAll('.game-container, .game-menu-container, .chat-options-container');
                containers.forEach(container => {
                    if (speech.contains(container)) {
                        speech.removeChild(container);
                    }
                });
            }
            
            // Default response for anything else
            // Check if there's an active game
            if (gameState) {
                return handleGameInteraction(text);
            }
            
            // Default response
            return "That's interesting! 🤔 I love learning new perspectives! Ask me about my projects, skills, education, or try 'help' to see what I can do!";
        }
        
        // Function to create and display interactive option menus
        function createOptionsMenu(message, options) {
            const speech = document.getElementById('character-speech');
            const speechText = document.getElementById('character-speech-text');
            
            if (!speech) return message;
            
            // First, display the message
            setTimeout(() => {
                // Create buttons container
                const buttonsContainer = document.createElement('div');
                buttonsContainer.className = 'chat-options-container';
                buttonsContainer.style.display = 'flex';
                buttonsContainer.style.flexDirection = 'column';
                buttonsContainer.style.gap = '8px';
                buttonsContainer.style.marginTop = '15px';
                
                // Create buttons for each option
                options.forEach(option => {
                    const button = document.createElement('button');
                    button.innerText = option.label;
                    button.className = 'chat-option-button';
                    button.style.backgroundColor = 'rgba(255, 255, 255, 0.15)';
                    button.style.border = 'none';
                    button.style.borderRadius = '20px';
                    button.style.padding = '8px 16px';
                    button.style.color = 'white';
                    button.style.cursor = 'pointer';
                    button.style.transition = 'all 0.2s ease';
                    button.style.backdropFilter = 'blur(5px)';
                    
                    button.onmouseover = () => {
                        button.style.backgroundColor = 'rgba(108, 99, 255, 0.4)';
                        button.style.transform = 'translateY(-2px)';
                    };
                    
                    button.onmouseout = () => {
                        button.style.backgroundColor = 'rgba(255, 255, 255, 0.15)';
                        button.style.transform = 'translateY(0)';
                    };
                    
                    // Handle button click
                    button.onclick = () => {
                        // Set the lastSuggestion based on button value
                        lastSuggestion = option.value;
                        
                        // Remove buttons container
                        if (speech.contains(buttonsContainer)) {
                            speech.removeChild(buttonsContainer);
                        }
                        
                        // Handle special case for games
                        if (option.value === 'game') {
                            handleGameStart();
                        } else if (option.value === 'hobbies') {
                            // For hobbies, directly show the response
                            if (speechText) {
                                speechText.textContent = "Outside of coding? I'm all about that balance! 🔄\n\n• ⚽ Playing competitive football (striker position)\n• 🎨 Digital art and cyberpunk illustrations\n• 🎸 Learning electric guitar (currently mastering Metallica solos)\n• 🏕️ Weekend hiking trips to disconnect from screens\n• 🎮 Building my own indie game about a hacker in a dystopian future\n\nWant to hear more about any of these? Just ask!";
                            }
                        } else {
                            // Simulate user saying "yes" to trigger the suggestion response
                            const chatInput = document.getElementById('chatInput');
                            if (chatInput) {
                                chatInput.value = "yes";
                                sendChatMessage();
                            }
                        }
                    };
                    
                    buttonsContainer.appendChild(button);
                });
                
                // Add buttons to speech bubble
                speech.appendChild(buttonsContainer);
                
            }, 200);
            
            return message;
        }
        
        // Function to handle game interactions
        function handleGameInteraction(text) {
            if (!gameState) return null;
            
            switch (gameState.game) {
                case 'number-guess':
                    return handleNumberGuessGame(text);
                case 'hangman':
                    return handleHangmanGame(text);
                case 'quiz':
                    return handleQuizGame(text);
                default:
                    gameState = null;
                    return "Sorry, that game isn't available right now.";
            }
        }
        
        // Function to start a game selection menu
        function handleGameStart() {
            setTimeout(() => {
                const gameOptions = [
                    { label: "Number Guessing Game", value: "number-guess" },
                    { label: "Hangman: Programming Terms", value: "hangman" },
                    { label: "Tech Trivia Quiz", value: "quiz" }
                ];
                
                speechText.textContent = "🎮 Choose a game to play:";
                
                // Create game selection menu
                createGameMenu(gameOptions);
            }, 300);
            
            return "Loading game center...";
        }
        
        // Function to create a game selection menu
        function createGameMenu(gameOptions) {
            const speech = document.getElementById('character-speech');
            const speechText = document.getElementById('character-speech-text');
            
            if (!speech) return;
            
            // Create game menu container with a retro game console style
            const gameMenuContainer = document.createElement('div');
            gameMenuContainer.className = 'game-menu-container';
            gameMenuContainer.style.backgroundColor = 'rgba(20, 20, 40, 0.85)';
            gameMenuContainer.style.borderRadius = '10px';
            gameMenuContainer.style.padding = '15px';
            gameMenuContainer.style.marginTop = '15px';
            gameMenuContainer.style.border = '2px solid rgba(108, 99, 255, 0.6)';
            gameMenuContainer.style.boxShadow = '0 0 15px rgba(108, 99, 255, 0.3)';
            
            // Add title
            const title = document.createElement('div');
            title.innerText = '🎮 VISHWA ARCADE 🎮';
            title.style.color = '#6c63ff';
            title.style.fontSize = '16px';
            title.style.fontWeight = 'bold';
            title.style.textAlign = 'center';
            title.style.marginBottom = '10px';
            title.style.textShadow = '0 0 5px rgba(108, 99, 255, 0.7)';
            gameMenuContainer.appendChild(title);
            
            // Create game buttons
            gameOptions.forEach(game => {
                const button = document.createElement('button');
                button.innerText = game.label;
                button.className = 'game-option-button';
                button.style.display = 'block';
                button.style.width = '100%';
                button.style.backgroundColor = 'rgba(60, 60, 100, 0.7)';
                button.style.border = '1px solid rgba(108, 99, 255, 0.3)';
                button.style.borderRadius = '5px';
                button.style.padding = '8px 12px';
                button.style.margin = '8px 0';
                button.style.color = 'white';
                button.style.cursor = 'pointer';
                button.style.transition = 'all 0.2s ease';
                
                button.onmouseover = () => {
                    button.style.backgroundColor = 'rgba(108, 99, 255, 0.5)';
                    button.style.transform = 'translateX(5px)';
                };
                
                button.onmouseout = () => {
                    button.style.backgroundColor = 'rgba(60, 60, 100, 0.7)';
                    button.style.transform = 'translateX(0)';
                };
                
                button.onclick = () => {
                    // Remove game menu
                    if (speech.contains(gameMenuContainer)) {
                        speech.removeChild(gameMenuContainer);
                    }
                    
                    // Initialize the selected game
                    if (typeof initializeGame === 'function') {
                        initializeGame(game.value);
                    } else if (typeof window.ArcadeGames?.initializeGame === 'function') {
                        window.ArcadeGames.initializeGame(game.value);
                    }
                };
                
                gameMenuContainer.appendChild(button);
            });
            
            // Add exit button
            const exitButton = document.createElement('button');
            exitButton.innerText = 'Exit Games';
            exitButton.style.display = 'block';
            exitButton.style.width = '100%';
            exitButton.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
            exitButton.style.border = '1px solid rgba(255, 99, 99, 0.3)';
            exitButton.style.borderRadius = '5px';
            exitButton.style.padding = '8px 12px';
            exitButton.style.margin = '12px 0 5px 0';
            exitButton.style.color = 'white';
            exitButton.style.cursor = 'pointer';
            
            exitButton.onmouseover = () => {
                exitButton.style.backgroundColor = 'rgba(255, 99, 99, 0.5)';
            };
            
            exitButton.onmouseout = () => {
                exitButton.style.backgroundColor = 'rgba(150, 60, 60, 0.7)';
            };
            
            exitButton.onclick = () => {
                if (speech.contains(gameMenuContainer)) {
                    speech.removeChild(gameMenuContainer);
                }
                if (speechText) {
                    speechText.textContent = "Games closed! Let me know if you want to play again later.";
                }
                gameState = null;
            };
            
            gameMenuContainer.appendChild(exitButton);
            
            speech.appendChild(gameMenuContainer);
            
            // Add to speech bubble
            speech.appendChild(gameMenuContainer);
        }

        // Chat functionality with proper async handling
        async function sendChatMessage() {
            const chatInput = document.getElementById('chatInput');
            const speechText = document.getElementById('character-speech-text');
            
            if (!chatInput || !speechText) return;
            
            const userMessage = chatInput.value.trim();
            if (!userMessage) return;
            
            console.log('Sending message:', userMessage);
            speechText.textContent = `You: ${userMessage}`;
            chatInput.value = '';
            
            setTimeout(async () => {
                let botResponse = '';
                try {
                    // First try to use the updated vishwaBot from the window object
                    if (window.vishwaBot && window.vishwaBot.getChatResponse) {
                        // Handle the VishwaBot response from chatbot.js
                        try {
                            const response = window.vishwaBot.getChatResponse(userMessage);
                            if (response && typeof response.then === 'function') {
                                // It's a Promise, await it
                                botResponse = await response;
                            } else {
                                // It's a regular string
                                botResponse = response;
                            }
                        } catch (err) {
                            console.error('Error with vishwaBot.getChatResponse:', err);
                            botResponse = "Sorry, I'm having trouble processing that right now.";
                        }
                    } 
                    // Fallback to localVishwaBot if it exists
                    else if (localVishwaBot && localVishwaBot.getChatResponse) {
                        try {
                            const response = localVishwaBot.getChatResponse(userMessage);
                            if (response && typeof response.then === 'function') {
                                // It's a Promise, await it
                                botResponse = await response;
                            } else {
                                // It's a regular string
                                botResponse = response;
                            }
                        } catch (err) {
                            console.error('Error with localVishwaBot.getChatResponse:', err);
                            botResponse = "Sorry, I'm having trouble processing that right now.";
                        }
                    } else {
                        // Use fallback system if available
                        if (typeof getChatResponse === 'function') {
                            botResponse = getChatResponse(userMessage);
                        } else {
                            botResponse = "I'm here to help! What would you like to know about my skills or projects?";
                        }
                    }
                    
                    // Make sure we have a valid response
                    if (!botResponse || botResponse === '[object Promise]') {
                        if (typeof getChatResponse === 'function') {
                            botResponse = getChatResponse(userMessage);
                        } else {
                            botResponse = "I'm here to help! What would you like to know about my skills or projects?";
                        }
                    }
                    
                } catch (error) {
                    console.error('Error getting bot response:', error);
                    if (typeof getChatResponse === 'function') {
                        botResponse = getChatResponse(userMessage);
                    } else {
                        botResponse = "Sorry, I encountered an error. How can I help you today?";
                    }
                }
                
                if (speechText) {
                    speechText.textContent = botResponse;
                }
                console.log('Bot response:', botResponse);
            }, 800);
        }

        // Event listeners
        const chatSend = document.getElementById('chatSend');
        const chatInput = document.getElementById('chatInput');
        
        if (chatSend) {
            chatSend.addEventListener('click', sendChatMessage);
        }
        if (chatInput) {
            chatInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendChatMessage();
            });
        }
        
        // Add keyboard shortcut (Escape key) to hide bot
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && isBotVisible) {
                toggleBotVisibility();
            }
        });

        // Enhanced interactive elements
        document.querySelectorAll('.interactive-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                if (typeof gsap !== 'undefined') {
                    gsap.to(this, { scale: 1.05, duration: 0.3, ease: "power2.out" });
                }
            });
            
            card.addEventListener('mouseleave', function() {
                if (typeof gsap !== 'undefined') {
                    gsap.to(this, { scale: 1, duration: 0.3, ease: "power2.out" });
                }
            });
        });

        // Progress bar animations
        setTimeout(() => {
            document.querySelectorAll('.animated-progress').forEach(progress => {
                progress.style.transform = 'scaleX(1)';
            });
        }, 1500);

        console.log('✅ Character setup complete!');
        
        // Add Konami code easter egg
        let konamiSequence = ['ArrowUp', 'ArrowUp', 'ArrowDown', 'ArrowDown', 'ArrowLeft', 'ArrowRight', 'ArrowLeft', 'ArrowRight', 'b', 'a'];
        let konamiPosition = 0;
        
        document.addEventListener('keydown', function(e) {
            // Check if the key matches the next key in the sequence
            if (e.key === konamiSequence[konamiPosition] || 
                (e.key.toLowerCase() === konamiSequence[konamiPosition] && isNaN(konamiSequence[konamiPosition]))) {
                konamiPosition++;
                
                // If the full sequence is entered
                if (konamiPosition === konamiSequence.length) {
                    activateEasterEgg();
                    konamiPosition = 0;
                }
            } else {
                konamiPosition = 0;
            }
        });
        
        function activateEasterEgg() {
            // Create matrix-style background animation
            const body = document.body;
            const overlay = document.createElement('div');
            overlay.style.position = 'fixed';
            overlay.style.top = '0';
            overlay.style.left = '0';
            overlay.style.width = '100vw';
            overlay.style.height = '100vh';
            overlay.style.backgroundColor = 'rgba(0, 0, 0, 0.8)';
            overlay.style.zIndex = '9999';
            overlay.style.display = 'flex';
            overlay.style.justifyContent = 'center';
            overlay.style.alignItems = 'center';
            overlay.style.flexDirection = 'column';
            overlay.style.color = '#00FF00';
            overlay.style.fontFamily = 'monospace';
            overlay.style.fontSize = '24px';
            overlay.style.transition = 'opacity 1s ease';
            
            // Add message and matrix effect
            const message = document.createElement('div');
            message.innerHTML = `<h2>🎮 KONAMI CODE ACTIVATED! 🎮</h2>
                                <p>You found the secret easter egg!</p>
                                <p>Fun fact: I'm developing a retro-style game in my free time!</p>
                                <p>Click anywhere to close</p>`;
            message.style.textAlign = 'center';
            message.style.padding = '20px';
            
            // Add code rain effect
            for (let i = 0; i < 100; i++) {
                const codeChar = document.createElement('div');
                const char = String.fromCharCode(33 + Math.floor(Math.random() * 94));
                codeChar.innerText = char;
                codeChar.style.position = 'absolute';
                codeChar.style.left = Math.random() * 100 + 'vw';
                codeChar.style.top = Math.random() * 100 + 'vh';
                codeChar.style.color = '#00FF00';
                codeChar.style.textShadow = '0 0 5px #00FF00';
                codeChar.style.fontSize = '20px';
                codeChar.style.opacity = Math.random();
                codeChar.style.animation = `fall ${2 + Math.random() * 5}s linear infinite`;
                overlay.appendChild(codeChar);
            }
            
            // Add animation style
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fall {
                    0% { transform: translateY(-100px); }
                    100% { transform: translateY(100vh); }
                }
            `;
            document.head.appendChild(style);
            
            overlay.appendChild(message);
            body.appendChild(overlay);
            
            // Remove overlay on click
            overlay.addEventListener('click', function() {
                overlay.style.opacity = '0';
                setTimeout(() => {
                    body.removeChild(overlay);
                }, 1000);
            });
        }
    </script>

    <!-- Hidden div for fun mode status -->
    <div id="funModeStatus" style="display: none;"></div>
    <script>
        // Initialize fun mode from localStorage on page load
        document.addEventListener('DOMContentLoaded', function() {
            // Check if fun mode is enabled in localStorage
            const funModeEnabled = localStorage.getItem('funModeEnabled') === 'true';
            
            // Initialize fun mode elements if enabled
            if (funModeEnabled && typeof initKonamiCodeElements === 'function') {
                initKonamiCodeElements();
            }
            
            // Mobile hamburger menu functionality
            const mobileMenuToggle = document.querySelector('.mobile-menu-toggle');
            const navLinks = document.querySelector('.nav-links');
            
            if (mobileMenuToggle && navLinks) {
                mobileMenuToggle.addEventListener('click', function() {
                    mobileMenuToggle.classList.toggle('active');
                    navLinks.classList.toggle('active');
                });
                
                // Close menu when clicking on a link
                const navLinkItems = navLinks.querySelectorAll('a');
                navLinkItems.forEach(link => {
                    link.addEventListener('click', function() {
                        mobileMenuToggle.classList.remove('active');
                        navLinks.classList.remove('active');
                    });
                });
                
                // Close menu when clicking outside
                document.addEventListener('click', function(e) {
                    if (!mobileMenuToggle.contains(e.target) && !navLinks.contains(e.target)) {
                        mobileMenuToggle.classList.remove('active');
                        navLinks.classList.remove('active');
                    }
                });
            }
        });
    </script>
</body>
</html>
